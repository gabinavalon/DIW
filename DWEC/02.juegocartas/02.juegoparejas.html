<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Juego de cartas en el que debes emparejar cartas de MTG fallando lo menos posible">
    <title>Parejas MTG</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Righteous&display=swap');


        * {
            font-family: 'Righteous', cursive;  
        }

   

        .contenedorCartas {
            display: grid;
            grid-template-columns: 144px 144px 144px 144px;
            grid-template-rows: 200px 200px 200px;
            grid-gap: 10px;
            justify-content: center;


        }

        .cartas {

            background-image: url("dorso.jpg");
            background-size: contain;
            background-repeat: no-repeat;
        }





        header {
            display: flex;
            align-items: center;
            text-align: center;
            border: 1px white solid;
            height: 100px;
            justify-content: center;

        }

        header img {

            height: 100px;
        }

        .tablas {
            display: flex;
            justify-content: space-around;
        }

        .tablas table{
            height: 100px;
        }

        .mensajes{
            text-align: center;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-around;
        }

        .juego{
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .informacion{
            width: 20%;
            text-align: center;

        }

        .informacion::selection{
            color: red;
        }
        .footer{
            text-align: center;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
    </style>
</head>

<body>
    <header>
        <img src="favicon\android-icon-192x192.png" alt="logo">
        <h1>Parejas MTG</h1>
    </header>



    <div class="tablas">
        <div class="puntuacion">
            <table>
                <tr>
                    <th rowspan="2">
                        <span id="usu"></span>
                    </th>
                    <th>
                        Puntuación
                    </th>
                    <th>
                        <i class="fas fa-trophy"></i>
                    </th>
                    <th>
                        Errores 
                    </th>
                    <th>
                        <i class="fas fa-skull"></i>
                    </th>
                </tr>
                <tr>
                    <td colspan="2"><input type="text" value="0" id="marcador" disabled size="3"></td>
                    <td colspan="2"><input type="text" value="0" id="errores" disabled size="3"></td>
                </tr>

            </table>
        </div>

        <div class="ranking" id="ranking">
            <table>
                <tr>
                    <th>Mejor jugadorx</th>
                    <th>Errores</th>
                </tr>
                <tr>
                    <td><input type="text" value="0" id="marcadorGanador" disabled size="3"></td>
                    <td><input type="text" value="0" id="erroresGanador" disabled size="3"></td>

                </tr>
            </table>

        </div>

        <div class="idioma">
            <table>
                <tr>
                    <th colspan="2">Idioma</th>
                </tr>
                <tr>
                    <td>ES</td>
                    <td>EN</td>
                </tr>
            </table>
        </div>
    </div>

        <div class="mensajes">
            Los mensajes van aquí
        </div>

        <div class="juego">

     

        <div class="contenedorCartas">

            <div class="cartas" id="carta1"></div>
            <div class="cartas" id="carta2"></div>
            <div class="cartas" id="carta3"></div>
            <div class="cartas" id="carta4"></div>
            <div class="cartas" id="carta5"></div>
            <div class="cartas" id="carta6"></div>
            <div class="cartas" id="carta7"></div>
            <div class="cartas" id="carta8"></div>
            <div class="cartas" id="carta9"></div>
            <div class="cartas" id="carta10"></div>
            <div class="cartas" id="carta11"></div>
            <div class="cartas" id="carta12"></div>

        </div>

        <div class="informacion">
            Para jugar solo tienes que hacer click en cualquier carta para darle la vuelta. <br> <br>
            Después, haz click en otra carta, si son iguales, habrás consegido un punto, 
            si son distintas, volverán a darse la vuelta. <br><br>
            ¡Tendrás que recordar su posición! <br><br>
            El juego termina cuando emparejas todas las cartas. <br> <br>
            ¡Intenta terminar con el menor número de fallos!
        </div>
    </div>

        <div class="footer">
            Gabriel Navalón Soriano
        </div>


    <script>

        let nomUsuario = document.getElementById('usu');
        var usuario = prompt("Escribe tu nombre de usuario: ");
        nomUsuario.innerHTML = usuario;

        window.addEventListener('load', function () {
            arrSrc.sort(function () { return Math.random() - 0.5 });

        });

        let carta1 = document.getElementById('carta1');
        let carta2 = document.getElementById('carta2');
        let carta3 = document.getElementById('carta3');
        let carta4 = document.getElementById('carta4');
        let carta5 = document.getElementById('carta5');
        let carta6 = document.getElementById('carta6');
        let carta7 = document.getElementById('carta7');
        let carta8 = document.getElementById('carta8');
        let carta9 = document.getElementById('carta9');
        let carta10 = document.getElementById('carta10');
        let carta11 = document.getElementById('carta11');
        let carta12 = document.getElementById('carta12');

        let arrCartas = [
            carta1, carta2, carta3, carta4, carta5, carta6,
            carta7, carta8, carta9, carta10, carta11, carta12
        ];

        let arrSrc = [
            "url(mtg1.jpg)", "url(mtg2.jpg)", "url(mtg3.jpg)",
            "url(mtg4.jpg)", "url(mtg5.jpg)", "url(mtg6.jpg)",
            "url(mtg1.jpg)", "url(mtg2.jpg)", "url(mtg3.jpg)",
            "url(mtg4.jpg)", "url(mtg5.jpg)", "url(mtg6.jpg)"
        ];
        let marcador = document.getElementById('marcador');
        let errores = document.getElementById('errores');

        let sel1 = '';
        let sel2 = '';
        let puntuacion = 0;
        let contadorErr = 0;


        arrCartas[0].addEventListener('click', function () {
            arrCartas[0].style.backgroundImage = arrSrc[0];
        });
        arrCartas[1].addEventListener('click', function () {
            arrCartas[1].style.backgroundImage = arrSrc[1];
        });


        arrCartas[2].addEventListener('click', function () {
            arrCartas[2].style.backgroundImage = arrSrc[2];
        });
        arrCartas[3].addEventListener('click', function () {
            arrCartas[3].style.backgroundImage = arrSrc[3];
        });

        arrCartas[4].addEventListener('click', function () {
            arrCartas[4].style.backgroundImage = arrSrc[4];
        });
        arrCartas[5].addEventListener('click', function () {
            arrCartas[5].style.backgroundImage = arrSrc[5];
        });

        arrCartas[6].addEventListener('click', function () {
            arrCartas[6].style.backgroundImage = arrSrc[6];
        });
        arrCartas[7].addEventListener('click', function () {
            arrCartas[7].style.backgroundImage = arrSrc[7];
        });

        arrCartas[8].addEventListener('click', function () {
            arrCartas[8].style.backgroundImage = arrSrc[8];
        });
        arrCartas[9].addEventListener('click', function () {
            arrCartas[9].style.backgroundImage = arrSrc[9];
        });

        arrCartas[10].addEventListener('click', function () {
            arrCartas[10].style.backgroundImage = arrSrc[10];
        });
        arrCartas[11].addEventListener('click', function () {
            arrCartas[11].style.backgroundImage = arrSrc[11];
        });


        arrCartas.forEach(element => {



            element.addEventListener('click', function comparar(e) {

                if (sel1 == '') {
                    sel1 = e.target;

                } else {
                    if (sel1 == e.target) {

                    } else {
                        sel2 = e.target;
                        if (sel1.style.backgroundImage === sel2.style.backgroundImage) {

                            sel1.removeEventListener('click', comparar);
                            sel2.removeEventListener('click', comparar);

                            sel1.style.visibility = 'inherit';
                            sel1.style.visibility = 'inherit';
                            sel1 = '';
                            sel2 = '';
                            puntuacion++;
                            marcador.value = puntuacion;
                            if (marcador.value == 6) {
                                alert("¡Has ganado! Errores: " + contadorErr);

                                document.cookie

                                location.reload();
                            }
                        } else {

                            setTimeout(() => {
                                if (sel1.style.visibility == 'inherit') {
                                    sel2.style.backgroundImage = 'url(dorso.jpg)';
                                } else if (sel2.style.visibility == 'inherit') {
                                    sel1.style.backgroundImage = 'url(dorso.jpg)';
                                } else {
                                    sel1.style.backgroundImage = 'url(dorso.jpg)';
                                    sel2.style.backgroundImage = 'url(dorso.jpg)';
                                }

                                sel1 = '';
                                sel2 = '';

                                contadorErr++;
                                errores.value = contadorErr;


                            }, 500);
                            //TODO que no se pueda hacer nada mientras se muestran las dos 

                        }
                    }
                }

            })
        });


        function getCookie(name) {
            var cookieArr = document.cookie.split(";");

            for (var i = 0; i < cookieArr.length; i++) {
                var cookiePair = cookieArr[i].split("=");

                if (name == cookiePair[0].trim()) {

                    return decodeURIComponent(cookiePair[1]);
                }
            }
            return null;
        }

        function setCookie(cname, cvalue, exdays) {
            const d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

    </script>

</body>

</html>